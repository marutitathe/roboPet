<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />

    <script type="text/javascript" src="cordova.js"></script>
    <!--<script type="text/javascript" charset="utf-8" src="js/SQLitePlugin.js"></script>-->

    <script type="text/javascript" src="js/main.js"></script>
    <title>RoboPet</title>
    <script language="javascript">

        var db = null;

        document.addEventListener("deviceready", onDeviceReady, false);

        function loadList()
        {

            var rowCount = 50;
            for (var i = 0; i <= rowCount-1; i++) {
                var strRow = "<div class='incExpViewIE'>" +
                            "    <div class='incExpDateIE'>20/04/2018</div>" +
                            "    <div class='incExpInfoIE'>General Expenses" +
                            "        <div class='incExpDetailIE'>asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>" +
                            "    </div>" +
                            "    <div class='incExpAmountIE'>999.50</div>" +
                            "    <div style='clear:both'></div>" +
                            "</div>";
            }
        }

        function onDeviceReady() 
        {
            logStep("1) DB Creation (Or Opening) Started.", 1); 
            try {
                
                //db = window.sqlitePlugin.openDatabase({
                //    name: 'roboPet.db',
                //    location: 'default',
                //});
                
                //db = window.sqlitePlugin.openDatabase({
                //    name: "roboPet.db", location: "default", androidDatabaseImplementation: 2
                //});

                db = window.openDatabase('roboPet.db', '1.0', 'roboPet Database', 2*1024*1024);

                logStep("2) Creating Tables If Not Present.", 0);


                db.transaction(function (tx) { 
                    tx.executeSql("DROP TABLE IF EXISTS IncExp");

                    tx.executeSql("CREATE TABLE IF NOT EXISTS IncExp(id integer primary key, IncExp integer, IEDate integer, category integer, IEDetail text, Amount real)");
                }, errorSQL);

                logStep("3) Inserting Sample Data.", 0);
                db.transaction(function (tx) {
                    tx.executeSql("DELETE FROM IncExp"); //Removing all records before inserting the same for test purpose

                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(1, 1, " + getTimeStamp(2018, 05, 01) + ", 1, 'asdf adsf asdf asdf asdf ', 450.50)");
                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(2, 1, " + getTimeStamp(2018, 05, 02) + ", 1, 'aaaa bbbb ccccc ddddd eeee', 550.00)");
                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(3, 1, " + getTimeStamp(2018, 05, 03) + ", 1, 'qwer qwer qewr qwer qewr qwer ', 900.00)");
                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(4, 1, " + getTimeStamp(2018, 05, 04) + ", 2, 'zxcv zxcv zxcv zxcv zxcv zxcv ', 120.00)");
                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(5, 0, " + getTimeStamp(2018, 05, 05) + ", 2, 'erty e yey erty erty ery y', 330.25)");
                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(6, 0, " + getTimeStamp(2018, 05, 06) + ", 2, 'dfg hdfgh df hdfgh dfgh dgfh ', 125.50)");
                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(7, 1, " + getTimeStamp(2018, 04, 07) + ", 2, 'khgjhg kjg jhg kjg kjgh kjg', 500.50)");
                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(8, 1, " + getTimeStamp(2018, 04, 08) + ", 3, 'bvnm bvn mbvnm vbnm vbmn vbmn ', 400.20)");
                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(9, 0, " + getTimeStamp(2018, 04, 09) + ", 3, 'aaaa aaaaa aaaaa aaaaa aaaaa ', 600.00)");
                    tx.executeSql("INSERT INTO IncExp (id, IncExp, IEDate, Category, IEDetail, Amount) VALUES(10, 1, " + getTimeStamp(2018, 03, 10) + ", 3, 'ddddd ddddd dddddd dddd dddd', 350.00)");

                }, errorSQL);

                //logStep("4) Retrieving data from IncExp table.", 0);

                db.transaction(function (tx) {

                    tx.executeSql("SELECT id, IncExp, IEDate, Category, IEDetail, Amount FROM IncExp ORDER BY IEDate DESC", [], function (rx, result) {

                        var rlen = result.rows.length;
                        var dabba = document.getElementById("canvasBody");
                        var divItemIE;
                        var addElementsToDabba = 0;
                        for (var i = 0; i < rlen; i++) {
                            //alert(getDateFromTimeStamp(result.rows.item(i).IEDate));

                            //Creating Default Month Year Title
                            divItemIE = document.createElement("DIV");
                            divItemIE.className = "itemIE";
                            var t10 = document.createTextNode(getItemDateMonth(result.rows.item(i).IEDate))
                            divItemIE.appendChild(t10);

                            var divDate = document.createElement("div");
                            divDate.className = "incExpDateIE";
                            var t1 = document.createTextNode(getDateFromTimeStamp(result.rows.item(i).IEDate));
                            divDate.appendChild(t1);

                            var divTitle = document.createElement("div");
                            divTitle.className = "incExpInfoIE";
                            var t2 = document.createTextNode(result.rows.item(i).Category)
                            divTitle.appendChild(t2);

                            var divInfo = document.createElement("div");
                            divInfo.classList = "incExpDetailIE";
                            var t3 = document.createTextNode(result.rows.item(i).IEDetail);
                            divInfo.appendChild(t3);

                            var divAmount = document.createElement("div");
                            divAmount.className = "incExpAmountIE";
                            var t4 = document.createTextNode(result.rows.item(i).Amount)
                            divAmount.appendChild(t4);

                            var divClearBoth = document.createElement("div");
                            divClearBoth.style = "clear:both";

                            var divWrapper = document.createElement("div");
                            divWrapper.className = "incExpViewIE";


                            divWrapper.appendChild(divDate);
                            divWrapper.appendChild(divTitle);
                            divTitle.appendChild(divInfo);
                            divWrapper.appendChild(divAmount);
                            divWrapper.appendChild(divClearBoth);

                            divItemIE.appendChild(divWrapper);
                            //var htmlString = "<div class='incExpViewIE'>" +
                            //                "    <div class='incExpDateIE'>" + getDateFromTimeStamp(results.rows.item(i).IEDate) + "</div> " +
                            //                "    <div class='incExpInfoIE'>General Expenses " +
                            //                "        <div class='incExpDetailIE'>asdf asdf adsf adsf adsf adsf asdf adsf ads f</div> " +
                            //                "    </div> " +
                            //                "    <div class='incExpAmountIE'>999.50</div> " +
                            //                "    <div style='clear:both'></div> " +
                            //                "</div> ";
                            //dabba.child

                             
                            if (i < rlen) //Current Row Is Not Last Row
                            {
                                var mon1 = getMonthFromTimeStamp(result.rows.item(i).IEDate);
                                var mon2 = getMonthFromTimeStamp(result.rows.item(i + 1).IEDate);
                                if (mon1 != mon2) {

                                    //Before creating new itemIE push existing elements to Dabba
                                    dabba.appendChild(divItemIE);

                                    //Create new ItemIE;
                                    divItemIE = document.createElement("div");
                                    divItemIE.className = "itemIE";

                                    var divMY = document.createElement("div");
                                    divMY.className = "monthYearIE";
                                    var t11 = document.createTextNode(getItemDateMonth(result.rows.item(i).IEDate))
                                    divMY.appendChild(t11);

                                    divItemIE.appendChild(divMY);
                                }
                            }


                        }

                    }, null);

                }, errorSQL);

            } catch (e) {
                logStep(e.message.trim(),0);
            }
        }

        function errorSQL(err)
        {
            logStep("Error Processing SQL Query :" + err);
        }

        function successSQL()
        {
            logStep("Success");
        }

    </script>


</head>
<body>
    <div id="mainCanvas">
        <div class="canvasTitle">
            <img src="img\backbutton1.png" alt="goBack" onclick="javascript: window.history.back();" />
            Income / Expense Z
            <div id="subTitle">Track Income & Control Expenses</div>
        </div>
        <div id="canvasBody" class="canvasBody">
            <div class="itemIE">
                <div class="monthYearIE">April 2018</div>

                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div> 
                    <div class="incExpInfoIE">General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>


                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">555.50</div>
                    <div style="clear:both"></div>
                </div>                                                                                                                                                                               


            </div>

            <div class="itemIE">
                <div class="monthYearIE">May 2018</div>

                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>


                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">999.50</div>
                    <div style="clear:both"></div>
                </div>
                <div class="incExpViewIE">
                    <div class="incExpDateIE">20/04/2018</div>
                    <div class="incExpInfoIE">
                        General Expenses
                        <div class="incExpDetailIE">asdf asdf adsf adsf adsf adsf asdf adsf ads f</div>
                    </div>
                    <div class="incExpAmountIE">555.50</div>
                    <div style="clear:both"></div>
                </div>


            </div>

        </div>
        <div style="clear:both"></div>
        <div class="canvasFooter"></div>
    </div>
    <div class="roundButton" onclick="goPage('IncomeExpense.html')">
        +
    </div>
    <script>
        getsetScreenSize();

    </script>


</body>
</html>